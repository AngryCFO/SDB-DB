# Домашнее задание к занятию «Базы данных» - `Александра Бужор`

## Задание 1: Описание таблиц базы данных

Начнём с того, что разобьём данные из [Excel-файла](https://github.com/AngryCFO/SDB-DB/blob/83843095158bccfe05a8ca649d4ed3e52b380eb4/hw-12-1.xlsx) на несколько связанных таблиц. Это поможет нам избежать дублирования информации и сделает нашу базу данных более эффективной.

### 1. Таблица "Сотрудники"

```sql
CREATE TABLE Сотрудники (
    id SERIAL PRIMARY KEY,
    фио VARCHAR(100) NOT NULL,
    оклад NUMERIC(10, 2) NOT NULL,
    должность_id INTEGER REFERENCES Должности(id),
    подразделение_id INTEGER REFERENCES Подразделения(id),
    дата_найма DATE NOT NULL,
    адрес_филиала_id INTEGER REFERENCES Адреса(id),
    проект_id INTEGER REFERENCES Проекты(id)
);
```

Эта таблица будет содержать основную информацию о каждом сотруднике:
- `id`: уникальный идентификатор сотрудника (SERIAL автоматически увеличивается)
- `фио`: полное имя сотрудника (используем VARCHAR, так как длина имен может варьироваться)
- `оклад`: зарплата сотрудника (NUMERIC для точного хранения денежных значений)
- `должность_id`, `подразделение_id`, `адрес_филиала_id`, `проект_id`: внешние ключи для связи с другими таблицами
- `дата_найма`: дата, когда сотрудник был нанят

### 2. Таблица "Должности"

```sql
CREATE TABLE Должности (
    id SERIAL PRIMARY KEY,
    название VARCHAR(50) NOT NULL
);
```

Эта таблица будет хранить список всех должностей в компании:
- `id`: уникальный идентификатор должности
- `название`: название должности (например, "ведущий разработчик", "специалист по персоналу")

### 3. Таблица "Подразделения"

```sql
CREATE TABLE Подразделения (
    id SERIAL PRIMARY KEY,
    название VARCHAR(100) NOT NULL,
    тип VARCHAR(50) NOT NULL
);
```

Здесь мы храним информацию о подразделениях компании:
- `id`: уникальный идентификатор подразделения
- `название`: название подразделения (например, "Центр разработки продуктов для digital-маркетинга")
- `тип`: тип подразделения (например, "Отдел", "Группа", "Департамент")

### 4. Таблица "Адреса"

```sql
CREATE TABLE Адреса (
    id SERIAL PRIMARY KEY,
    индекс VARCHAR(6) NOT NULL,
    регион VARCHAR(100) NOT NULL,
    город VARCHAR(50) NOT NULL,
    улица VARCHAR(100) NOT NULL,
    дом VARCHAR(10) NOT NULL
);
```

Эта таблица содержит адреса филиалов:
- `id`: уникальный идентификатор адреса
- `индекс`, `регион`, `город`, `улица`, `дом`: компоненты адреса

### 5. Таблица "Проекты"

```sql
CREATE TABLE Проекты (
    id SERIAL PRIMARY KEY,
    название VARCHAR(100) NOT NULL
);
```

Здесь хранятся названия проектов:
- `id`: уникальный идентификатор проекта
- `название`: название проекта (например, "ИТилма Инженерный корпус", "Севастополь ТВ")

### 6. Таблица "Структурные_подразделения"

```sql
CREATE TABLE Структурные_подразделения (
    id SERIAL PRIMARY KEY,
    название VARCHAR(100) NOT NULL,
    подразделение_id INTEGER REFERENCES Подразделения(id)
);
```

Эта таблица связывает структурные подразделения с основными подразделениями:
- `id`: уникальный идентификатор структурного подразделения
- `название`: название структурного подразделения
- `подразделение_id`: ссылка на основное подразделение

### 7. Таблица "Типы_подразделений"

```sql
CREATE TABLE Типы_подразделений (
    id SERIAL PRIMARY KEY,
    название VARCHAR(50) NOT NULL
);
```

Здесь мы храним типы подразделений:
- `id`: уникальный идентификатор типа
- `название`: название типа подразделения (например, "Отдел", "Группа", "Департамент")

## Задание 2*: Функциональные зависимости и нормализация

Теперь разберём, какие функциональные зависимости есть в нашей исходной таблице и как мы можем нормализовать данные.

### Функциональные зависимости:

1. ФИО сотрудника → Оклад, Должность, Тип подразделения, Структурное подразделение, Дата найма, Адрес филиала, Проект
   - Это означает, что зная ФИО сотрудника, мы можем определить все остальные его атрибуты.

2. Должность → Тип подразделения, Структурное подразделение
   - Каждая должность связана с определённым типом и структурным подразделением.

3. Тип подразделения → Структурное подразделение
   - Зная тип подразделения, мы можем определить, к какому структурному подразделению оно относится.

4. Адрес филиала → Регион, Город
   - Полный адрес филиала определяет регион и город.

### Правила для нормализации:

1. Выделение отдельных таблиц:
   - Мы создали отдельные таблицы для Сотрудников, Должностей, Подразделений, Адресов и Проектов. Это помогает избежать дублирования данных.

2. Создание связующих таблиц:
   - Если бы у нас были отношения многие-ко-многим (например, если бы сотрудник мог работать над несколькими проектами), мы бы создали дополнительную таблицу для связи Сотрудников и Проектов.

3. Устранение транзитивных зависимостей:
   - Мы вынесли информацию о должностях, подразделениях и адресах в отдельные таблицы, чтобы избежать ситуаций, когда изменение одного поля требует изменения многих записей.

4. Выделение повторяющихся групп:
   - Адреса вынесены в отдельную таблицу, чтобы избежать повторения одинаковых адресов для разных сотрудников.

5. Создание уникальных идентификаторов:
   - Для каждой таблицы мы создали первичный ключ (id), который уникально идентифицирует каждую запись.

6. Установка внешних ключей:
   - Мы использовали внешние ключи (REFERENCES) для связи между таблицами, что обеспечивает целостность данных.

Применяя эти правила, мы привели нашу базу данных к третьей нормальной форме (3NF). Это означает, что:
- У нас нет повторяющихся групп данных
- Все неключевые атрибуты зависят только от первичного ключа
- Нет транзитивных зависимостей

Такая структура позволяет нам эффективно хранить данные, избегать избыточности и аномалий при обновлении информации.
